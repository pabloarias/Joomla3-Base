/*
 Copyright (c)2006-2017 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Extradirs&&(akeeba.Extradirs={});akeeba.Extradirs.render=function(a){var d=document.getElementById("ak_list_contents");d.innerHTML="";for(rootname in a)a.hasOwnProperty(rootname)&&akeeba.Extradirs.addRow(rootname,a[rootname],d);akeeba.Extradirs.addNewRecordButton(d)};
akeeba.Extradirs.addRow=function(a,d,m){var h=document.createElement("tr");h.className="ak_filter_row";akeeba.System.data.set(h,"rootuuid",a);akeeba.System.data.set(h,"def",d);a=document.createElement("td");var n=document.createElement("td"),k=document.createElement("td"),l=document.createElement("td"),b=document.createElement("span");b.className="ak_filter_tab_icon_container btn btn-default delete";akeeba.System.addEventListener(b,"click",function(){var c={uuid:akeeba.System.data.get(this.parentNode.parentNode,
"rootuuid"),verb:"remove"};akeeba.Fsfilters.toggle(c,this,function(c,a){if(!0==c.success){var b=a.parentNode.parentNode;b.parentNode.removeChild(b)}})});b.insertAdjacentHTML("beforeend",'<span class="icon icon-trash deletebutton ak-toggle-button"></span>');a.appendChild(b);b=document.createElement("span");b.className="ak_filter_tab_icon_container btn btn-default";akeeba.System.addEventListener(b,"click",function(){var c=this.parentNode.parentNode;this.style.display="none";c.querySelector("span.delete").style.display=
"none";var a=this.parentNode,b=a.parentNode,f=document.createElement("span");f.className="ak_filter_tab_icon_container btn btn-default save icon icon-save ak-toggle-button ak-stacked-button";akeeba.System.addEventListener(f,"click",function(){var a=c.querySelector("input.folder_editor").value,a=trim(a),b=c.querySelector("input.virtual_editor").value,b=trim(b);empty(b)&&(b=Math.uuid(8)+"-"+basename(a));var d=akeeba.System.data.get(c,"def",","),d=d.split(",",2);if(""==a)if(""==d[0])akeeba.System.triggerEvent(this.parentNode.querySelector("span.cancel"),
"click");else{var e=c.querySelector("span.delete");e.style.display="inline-block";akeeba.System.triggerEvent(e,"click")}else e={uuid:akeeba.System.data.get(c,"rootuuid"),root:a,data:b,verb:"set"},akeeba.Fsfilters.toggle(e,this,function(e,f){if(!0==e.success){if(""==d[0]){var g=f.parentNode.querySelector("span.editbutton");akeeba.System.removeClass(g,"icon-plus-circle");akeeba.System.addClass(g,"icon-pencil ak-toggle-button");akeeba.Extradirs.addNewRecordButton(m)}akeeba.System.data.set(c,"def",[a,
b]);console.debug(c);c.querySelector("span.ak_directory").textContent=a;c.querySelector("span.ak_virtual").textContent=b;f.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block";g=f.parentNode.querySelector("span.cancel");g.parentNode.removeChild(g);c.querySelector("span.delete").style.display="inline-block";f.parentNode.removeChild(f);g=c.querySelector("input.folder_editor");g.parentNode.removeChild(g);g=c.querySelector("input.virtual_editor");g.parentNode.removeChild(g);
g=c.querySelector("span.browse");g.parentNode.removeChild(g);c.querySelector("span.ak_directory").style.display="inline-block";c.querySelector("span.ak_virtual").style.display="inline-block"}},!1)});a.appendChild(f);f=document.createElement("span");f.className="ak_filter_tab_icon_container btn btn-default cancel icon icon-cancel ak-toggle-button";akeeba.System.addEventListener(f,"click",function(){this.parentNode.querySelector("span.ak_filter_tab_icon_container").style.display="inline-block";var a=
this.parentNode.querySelector("span.save");a.parentNode.removeChild(a);this.parentNode.removeChild(this);a=c.querySelector("input.folder_editor");a.parentNode.removeChild(a);a=c.querySelector("input.virtual_editor");a.parentNode.removeChild(a);a=c.querySelector("span.browse");a.parentNode.removeChild(a);c.querySelector("span.ak_directory").style.display="inline-block";c.querySelector("span.ak_virtual").style.display="inline-block";a=akeeba.System.data.get(c,"def",",");a=a.split(",",2);""!=a[0]&&(c.querySelector("span.delete").style.display=
"inline-block")});a.appendChild(f);var a=akeeba.System.data.get(c,"def",","),a=a.split(",",2),b=b.querySelector("td.ak_filter_item"),f=b.nextElementSibling,e=document.createElement("input");e.setAttribute("type","text");e.setAttribute("size","60");e.className="folder_editor";e.value=a[0];var d=document.createElement("span");d.className="ak_filter_tab_icon_container btn btn-default browse icon icon-folder-open ak-toggle-button";akeeba.System.addEventListener(d,"click",function(){var a=this.parentNode.querySelector("input.folder_editor"),
b=trim(a.value);""==b&&(b="[ROOTPARENT]");akeeba.Configuration.onBrowser(b,a)});b.appendChild(e);b.appendChild(d);e=document.createElement("input");e.setAttribute("type","text");e.setAttribute("size","60");e.className="virtual_editor";e.value=a[1];f.appendChild(e);b.querySelector("span.ak_directory").style.display="none";f.querySelector("span.ak_virtual").style.display="none"});b.insertAdjacentHTML("beforeend",'<span class="icon icon-pencil editbutton ak-toggle-button"></span>');n.appendChild(b);
k.className="ak_filter_item";b=document.createElement("span");b.className="ak_filter_name ak_directory";b.textContent=d[0];k.appendChild(b);l.className="ak_filter_item";b=document.createElement("span");b.className="ak_filter_name ak_virtual";b.textContent=d[1];l.appendChild(b);h.appendChild(a);h.appendChild(n);h.appendChild(k);h.appendChild(l);m.appendChild(h)};
akeeba.Extradirs.addNewRecordButton=function(a){var d=Math.uuid();akeeba.Extradirs.addRow(d,["",""],a);a=document.getElementById("ak_list_contents").children;a=a[a.length-1].querySelectorAll("td");a[0].querySelector("span").style.display="none";a=a[1].querySelectorAll("span");a=a[a.length-1];akeeba.System.removeClass(a,"icon-pencil");akeeba.System.addClass(a,"icon-plus-circle ak-toggle-button")}; //# sourceMappingURL=IncludeFolders.min.map
