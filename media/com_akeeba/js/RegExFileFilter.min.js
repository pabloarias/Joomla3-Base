/*
 Copyright (c)2006-2020 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Regexfsfilters&&(akeeba.Regexfsfilters={currentRoot:null});akeeba.Regexfsfilters.activeRootChanged=function(){var a=document.getElementById("active_root");akeeba.Regexfsfilters.load(a.options[a.selectedIndex].value)};akeeba.Regexfsfilters.load=function(a){a={action:JSON.stringify({root:a,verb:"list"})};akeeba.System.doAjax(a,function(a){akeeba.Regexfsfilters.render(a)},null,!1,15E3)};
akeeba.Regexfsfilters.render=function(a){var l=document.getElementById("ak_list_contents");l.innerHTML="";for(var d=0;d<a.length;d++)akeeba.Regexfsfilters.addRow(a[d],l);akeeba.Regexfsfilters.addNewRow(l)};
akeeba.Regexfsfilters.addRow=function(a,l){var d=document.createElement("tr");l.appendChild(d);var b="akion-edit";""==a.item&&(b="akion-plus");var e=document.createElement("td"),g=document.createElement("span"),f=document.createElement("span");e.appendChild(g);e.appendChild(f);d.appendChild(e);g.className="table-icon-container akeeba-btn--teal--mini edit ak-toggle-button";g.insertAdjacentHTML("beforeend",'<span class="'+b+'"></span>');akeeba.System.addEventListener(g,"click",function(){var b=["regexfiles",
"regexdirectories","regexskipdirs","regexskipfiles"],h=document.createElement("select");h.setAttribute("name","type");h.className="type-select";for(var c=0;c<b.length;c++){var e=b[c],g=!1;e===a.type&&(g=!0);var f=document.createElement("option");g&&f.setAttribute("selected","selected");f.setAttribute("value",e);f.textContent=akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_"+String(e).toUpperCase().substr(5));h.appendChild(f)}d.querySelector("td.ak-type span").style.display="none";d.querySelector("td.ak-type").appendChild(h);
var k=document.createElement("input");k.setAttribute("type","text");k.setAttribute("name","item");k.setAttribute("size","100");k.value=a.item;d.querySelector("td.ak-item tt").style.display="none";d.querySelector("td.ak-item").appendChild(k);b=d.children[0];b.querySelector("span.edit").style.display="none";b.querySelector("span.delete").style.display="none";c=document.createElement("span");c.className="table-icon-container akeeba-btn--teal--mini save ak-toggle-button";c.insertAdjacentHTML("beforeend",
'<span class="akion-checkmark"></span>');akeeba.System.addEventListener(c,"click",function(){var b=d.children[0];b.querySelector("span.delete").style.display="none";var c=h.options[h.selectedIndex].value,e=k.value;if(""===trim(e))""===a.item?akeeba.System.triggerEvent(b.querySelector("span.cancel"),"click"):akeeba.System.triggerEvent(b.querySelector("span.delete"),"click");else if(a.item===e&&a.type===c)akeeba.System.triggerEvent(b.querySelector("span.cancel"),"click");else{b=document.getElementById("active_root");
var f={verb:"set",type:c,node:e,root:b.options[b.selectedIndex].value};akeeba.Fsfilters.toggle(f,this,function(b,h){b=""!=a.item&&""!=a.type&&(a.item!=e||a.type!=c);h=""==a.item||""==a.type;var k=d.children[0];if(""==a.item){var g=k.querySelector("span.edit").firstChild;g.className=g.className.replace("akion-plus","akion-edit")}f.type=a.type;f.node=a.item;a.type=c;a.item=e;g="COM_AKEEBA_FILEFILTERS_TYPE_"+String(a.type).toUpperCase().substr(5);d.querySelector("td.ak-type span").textContent=akeeba.System.Text._(g);
d.querySelector("td.ak-item tt").textContent=escapeHTML(a.item);akeeba.System.triggerEvent(k.querySelector("span.cancel"),"click");b?(f.verb="remove",akeeba.Fsfilters.toggle(f,this,function(a,b){},!1)):(a.item!=e||a.type!=c||h)&&akeeba.Regexfsfilters.addNewRow(l)},!1)}});b.appendChild(c);c=document.createElement("span");c.className="table-icon-container akeeba-btn--orange--mini cancel ak-toggle-button";c.insertAdjacentHTML("beforeend",'<span class="akion-close"></span>');akeeba.System.addEventListener(c,
"click",function(){var b=d.children[0],c=b.querySelector("span.save");c.parentNode.removeChild(c);c=b.querySelector("span.cancel");c.parentNode.removeChild(c);b.querySelector("span.edit").style.display="inline-block";""!=a.item&&(b.querySelector("span.delete").style.display="inline-block");h.parentNode.removeChild(h);d.querySelector("td.ak-type span").style.display="inline-block";k.parentNode.removeChild(k);d.querySelector("td.ak-item tt").style.display="inline"});b.appendChild(c)});f.className="table-icon-container akeeba-btn--red--mini delete ak-toggle-button";
f.insertAdjacentHTML("beforeend",'<span class="akion-trash-a"></span>');akeeba.System.addEventListener(f,"click",function(){var b=document.getElementById("active_root");akeeba.Fsfilters.toggle({verb:"remove",type:a.type,node:a.item,root:b.options[b.selectedIndex].value},this,function(b,c){d.parentNode.removeChild(d);""==a.item&&akeeba.Regexfsfilters.addNewRow(l)},!1)});""==a.item&&(e.querySelector("span.delete").style.display="none");b="COM_AKEEBA_FILEFILTERS_TYPE_"+String(a.type).toUpperCase().substr(5);
b=akeeba.System.Text._(b);""==a.type&&(b="");e=document.createElement("td");e.className="ak-type";e.innerHTML="<span>"+b+"</span>";d.appendChild(e);b=document.createElement("td");b.className="ak-item";b.innerHTML="<tt>"+(null==a.item?"":escapeHTML(a.item))+"</tt>";d.appendChild(b)};akeeba.Regexfsfilters.addNewRow=function(a){akeeba.Regexfsfilters.addRow({type:"",item:""},a)};
akeeba.System.documentReady(function(){akeeba.System.addEventListener("active_root","change",akeeba.Regexfsfilters.activeRootChanged);akeeba.Regexfsfilters.render(akeeba.System.getOptions("akeeba.RegExFileFilter.guiData",{}))}); //# sourceMappingURL=RegExFileFilter.min.map
