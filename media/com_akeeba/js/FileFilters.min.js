/*
 Copyright (c)2006-2018 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Fsfilters&&(akeeba.Fsfilters={currentRoot:null,loadingGif:""});akeeba.Fsfilters.activeRootChanged=function(){var c=document.getElementById("active_root"),a={};a.root=c.options[c.selectedIndex].value;a.crumbs=[];a.node="";akeeba.Fsfilters.load(a)};akeeba.Fsfilters.load=function(c){c.verb="list";c=JSON.stringify(c);var a={};a.action=c;akeeba.System.doAjax(a,function(a){akeeba.Fsfilters.render(a)},null,!1,15E3)};
akeeba.Fsfilters.toggle=function(c,a,f,g){null==g&&(g=!0);if(null!=a){if(!0==akeeba.System.data.get(a,"loading",!1))return;akeeba.System.data.set(a,"loading",!0);var d=a;g&&(d=a.querySelector("span"));akeeba.System.data.get(a,"iconClass","")||akeeba.System.data.set(a,"iconClass",d.className);d.className="ak-toggle-button ak-toggle-button-spinning akion-android-star-outline";var e=setInterval(function(){"undefined"===typeof d.className?clearInterval(e):-1!=d.className.indexOf("akion-android-star-outline")?
(akeeba.System.removeClass(d,"akion-android-star-outline"),akeeba.System.addClass(d,"akion-android-star")):-1!=d.className.indexOf("akion-android-star")&&(akeeba.System.addClass(d,"akion-android-star-outline"),akeeba.System.removeClass(d,"akion-android-star"))},250);akeeba.System.data.set(a,"akeebatimer",e)}var b={action:JSON.stringify(c)};akeeba.System.doAjax(b,function(b){if(null!=a){var e=akeeba.System.data.get(a,"akeebatimer");clearInterval(e);if(e=akeeba.System.data.get(a,"iconClass"))d.className=
e;akeeba.System.data.set(a,"iconClass",null);akeeba.System.data.set(a,"loading",null)}!0==b.success?(null!=a&&g&&(!0==b.newstate?(akeeba.System.removeClass(a,"akeeba-btn--grey"),akeeba.System.addClass(a,"akeeba-btn--orange")):(akeeba.System.removeClass(a,"akeeba-btn--orange"),akeeba.System.addClass(a,"akeeba-btn--grey"))),null!=f&&f(b,a)):(null!=f&&f(b,a),akeeba.System.modalErrorHandler(Joomla.JText._("COM_AKEEBA_FILEFILTERS_LABEL_UIERRORFILTER").replace("%s",c.node)))},function(b){if(null!=a){var c=
akeeba.System.data.get(a,"akeebatimer");clearInterval(c);d.className=akeeba.System.data.get(a,"iconClass");akeeba.System.data.set(a,"iconClass");akeeba.System.data.set(a,"loading")}akeeba.System.params.errorCallback(b)},!0,15E3)};
akeeba.Fsfilters.render=function(c){akeeba.Fsfilters.currentRoot=c.root;crumbs=akeeba.Fsfilters.renderCrumbs(c);var a=document.getElementById("folders");a.innerHTML="";0<c.crumbs.length&&akeeba.Fsfilters.renderParentFolderElement();if(0<Object.keys(c.folders).length){var f=["directories_all","skipdirs_all","skipfiles_all"],g=document.createElement("div");g.className="folder-header folder-container";for(var d=0;d<f.length;d++){var e=f[d],b=document.createElement("span");b.className="folder-icon-container akeeba-btn--mini akeeba-btn--grey";
b.setAttribute("title",'<div class="tooltip-arrow-up-leftaligned"></div><div>'+Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_"+e.toUpperCase())+"</div>");b.setAttribute("data-akeeba-tooltip-position","right");var k="";switch(e){case "directories_all":k="akion-close-circled";b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-close-circled"></span>');break;case "skipdirs_all":k="akion-folder";b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-folder"></span>');break;
case "skipfiles_all":k="akion-document",b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-document"></span>')}akeeba.System.addEventListener(b,"click",function(b,c){return function(){var e;-1!=b.className.indexOf("akeeba-btn--orange")?(akeeba.System.removeClass(b,"akeeba-btn--orange"),akeeba.System.addClass(b,"akeeba-btn--grey"),e=!1):(akeeba.System.removeClass(b,"akeeba-btn--grey"),akeeba.System.addClass(b,"akeeba-btn--orange"),e=!0);for(var d=1;d<a.children.length;d++){var f=
a.children[d].querySelector("span."+c),g=-1!=f.parentNode.className.indexOf("akeeba-btn--orange");!e&&!g||e&&g||akeeba.System.triggerEvent(f,"click")}}}(b,k));g.appendChild(b);akeeba.Tooltip.simpleTooltip(b)}b=document.createElement("span");b.className="folder-name";b.innerHTML='<span class="pull-left akion-arrow-down-a"></span>'+Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_APPLYTOALLDIRS");g.appendChild(b);a.appendChild(g)}for(var h in c.folders){if(!c.folders.hasOwnProperty(h))return;g=c.folders[h];
uielement=document.createElement("div");uielement.className="folder-container";f=["directories","skipdirs","skipfiles"];for(d=0;d<f.length;d++){e=f[d];b=document.createElement("span");b.className="akeeba-btn--mini akeeba-btn--grey folder-icon-container";b.setAttribute("title",'<div class="tooltip-arrow-up-leftaligned"></div><div>'+Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_"+e.toUpperCase())+"</div>");switch(e){case "directories":b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-close-circled"></span>');
break;case "skipdirs":b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-folder"></span>');break;case "skipfiles":b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-document"></span>')}b.setAttribute("data-akeeba-tooltip-position","right");akeeba.Tooltip.simpleTooltip(b);switch(g[e]){case 2:akeeba.System.removeClass(b,"akeeba-btn--grey");akeeba.System.addClass(b,"akeeba-btn--red");break;case 1:akeeba.System.removeClass(b,"akeeba-btn--grey"),akeeba.System.addClass(b,
"akeeba-btn--orange");case 0:akeeba.System.addEventListener(b,"click",function(b,a,e){return function(){akeeba.Fsfilters.toggle({root:c.root,crumbs:crumbs,node:b,filter:a,verb:"toggle"},e)}}(h,e,b))}uielement.appendChild(b)}b=document.createElement("span");b.textContent=h;b.className="folder-name";akeeba.System.addEventListener(b,"click",function(b){return function(){var a=document.createElement("img");a.setAttribute("src",akeeba.Fsfilters.loadingGif);a.setAttribute("width",16);a.setAttribute("height",
11);a.setAttribute("border",0);a.setAttribute("alt","Loading...");a.style.marginTop="3px";a.style.marginLeft="5px";this.appendChild(a);akeeba.Fsfilters.load({root:c.root,crumbs:crumbs,node:b})}}(h));uielement.appendChild(b);a.appendChild(uielement)}h=document.getElementById("files");h.innerHTML="";0<Object.keys(c.files).length&&(e=document.createElement("div"),e.className="file-header file-container",b=document.createElement("span"),b.className="file-icon-container akeeba-btn--mini akeeba-btn--grey",
b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-close-circled"></span>'),b.setAttribute("title",'<div class="tooltip-arrow-up-leftaligned"></div><div>'+Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_FILES_ALL")+"</div>"),b.setAttribute("data-akeeba-tooltip-position","right"),akeeba.Tooltip.simpleTooltip(b),akeeba.System.addEventListener(b,"click",function(b){return function(){var b;-1!=this.className.indexOf("akeeba-btn--orange")?(akeeba.System.removeClass(this,"akeeba-btn--orange"),
akeeba.System.addClass(this,"akeeba-btn--grey"),b=!1):(akeeba.System.removeClass(this,"akeeba-btn--grey"),akeeba.System.addClass(this,"akeeba-btn--orange"),b=!0);for(var a=document.getElementById("files"),c=1;c<a.children.length;c++){var e=a.children[c].querySelector("span.akion-close-circled"),d=-1!=e.parentNode.className.indexOf("akeeba-btn--orange");!b&&!d||b&&d||akeeba.System.triggerEvent(e,"click")}}}(b)),e.appendChild(b),b=document.createElement("span"),b.className="file-name",b.innerHTML='<span class="pull-left akion-arrow-down-a"></span>'+
Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_APPLYTOALLFILES"),e.appendChild(b),h.appendChild(e));for(fileName in c.files)if(c.files.hasOwnProperty(fileName)){g=c.files[fileName];uielement=document.createElement("div");uielement.className="file-container";f=["files"];for(d=0;d<f.length;d++){e=f[d];b=document.createElement("span");b.className="file-icon-container akeeba-btn--mini akeeba-btn--grey";switch(e){case "files":b.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-close-circled"></span>')}b.setAttribute("title",
'<div class="tooltip-arrow-up-leftaligned"></div><div>'+Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_"+e.toUpperCase())+"</div>");b.setAttribute("data-akeeba-tooltip-position","right");akeeba.Tooltip.simpleTooltip(b);switch(g[e]){case 2:akeeba.System.removeClass(b,"akeeba-btn--grey");akeeba.System.addClass(b,"akeeba-btn--red");break;case 1:akeeba.System.removeClass(b,"akeeba-btn--grey"),akeeba.System.addClass(b,"akeeba-btn--orange");case 0:akeeba.System.addEventListener(b,"click",function(b,a,e){return function(){akeeba.Fsfilters.toggle({root:c.root,
crumbs:crumbs,node:b,filter:a,verb:"toggle"},e)}}(fileName,e,b))}uielement.appendChild(b)}b=document.createElement("span");b.className="file-name";b.textContent=fileName;uielement.appendChild(b);b=document.createElement("span");b.className="file-size";b.textContent=g.size;uielement.appendChild(b);h.appendChild(uielement)}};
akeeba.Fsfilters.nuke=function(){var c={action:JSON.stringify({root:akeeba.Fsfilters.currentRoot,verb:"reset"})};akeeba.System.doAjax(c,function(a){akeeba.Fsfilters.render(a)},null,!1,15E3)};akeeba.Fsfilters.loadTab=function(c){c={action:JSON.stringify({verb:"tab",root:c})};akeeba.System.doAjax(c,function(a){akeeba.Fsfilters.renderTab(a)},null,!1,15E3)};
akeeba.Fsfilters.addRow=function(c,a){var f=Joomla.JText._("COM_AKEEBA_FILEFILTERS_TYPE_"+c.type.toUpperCase());null==f&&(f=c.type);var g=document.createElement("tr");g.className="ak_filter_row";var d=document.createElement("td");g.appendChild(d);d.className="ak_filter_type";d.insertAdjacentHTML("beforeend",f);f=document.createElement("td");g.appendChild(f);f.className="ak_filter_item";d=document.createElement("span");f.appendChild(d);d.className="ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--red deletecontainer";
akeeba.System.addEventListener(d,"click",function(){if(""==c.node){var a=this.parentNode.parentNode;a.parentNode.removeChild(a)}else a=document.getElementById("active_root"),akeeba.Fsfilters.toggle({root:a.options[a.selectedIndex].value,crumbs:[],node:c.node,filter:c.type,verb:"toggle"},this,function(b,a){if(b.success){var c=a.parentNode.parentNode;c.parentNode.removeChild(c)}})});d.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-trash-a deletebutton"></span>');d=document.createElement("span");
f.appendChild(d);d.className="ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--teal editcontainer";akeeba.System.addEventListener(d,"click",function(){if(null==this.parentNode.querySelector("input")){this.parentNode.querySelector("span.ak_filter_name").style.display="none";var a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("size",60);a.value=this.parentNode.querySelector("span.ak_filter_name").textContent;this.parentNode.appendChild(a);akeeba.System.addEventListener(a,
"blur",function(){var b=this.value,a=this;if(""==b)akeeba.System.triggerEvent(a.parentNode.querySelector("span.deletebutton"),"click");else{var d=document.getElementById("active_root"),d={root:d.options[d.selectedIndex].value,crumbs:[],old_node:c.node,new_node:b,filter:c.type,verb:"swap"},e=a.parentNode.querySelector("span.editcontainer");akeeba.Fsfilters.toggle(d,e,function(d,e){var f=a.parentNode.querySelector("span.ak_filter_name");f.style.display="inline-block";f.textContent=b;a.parentNode.removeChild(a);
c.node=b})}});a.focus()}});d.insertAdjacentHTML("beforeend",'<span class="ak-toggle-button akion-edit editbutton"></span>');d=document.createElement("span");d.className="ak_filter_name";d.textContent=c.node;f.appendChild(d);a.appendChild(g)};
akeeba.Fsfilters.addNew=function(c){akeeba.Fsfilters.addRow({type:c,node:""},document.getElementById("ak_list_table").children[1]);c=document.getElementById("ak_list_table").children[1].children;akeeba.System.triggerEvent(c[c.length-1].querySelector("span.editcontainer"),"click")};akeeba.Fsfilters.renderTab=function(c){var a=document.getElementById("ak_list_contents");a.innerHTML="";for(var f=0;f<c.length;f++)akeeba.Fsfilters.addRow(c[f],a)};
akeeba.Fsfilters.renderCrumbs=function(c){var a=[],f=[Joomla.JText._("COM_AKEEBA_FILEFILTERS_LABEL_UIROOT"),c.root,[],""];a.push(f);var g=0;if(0<c.crumbs.length)for(var d=[],g=0;g<c.crumbs.length;g++){var e=c.crumbs[g],f=[e,c.root,d.slice(0),e];a.push(f);d.push(e)}c=document.getElementById("ak_crumbs");c.innerHTML="";e=null;for(g=0;g<a.length;g++){var e=a[g],f=document.createElement("li"),b=document.createElement("a");b.setAttribute("href","javascript:");e[0]=e[0].replace("&lt;","<").replace("&gt;",
">");b.textContent=e[0];akeeba.System.addEventListener(b,"click",function(b){return function(){var a=document.createElement("img");a.setAttribute("src",akeeba.Fsfilters.loadingGif);a.setAttribute("width",16);a.setAttribute("height",11);a.setAttribute("border",0);a.setAttribute("alt","Loading...");a.style.marginTop="5px";a.style.marginLeft="5px";this.appendChild(a);akeeba.Fsfilters.load({root:b[1],crumbs:b[2],node:b[3]})}}(e));f.appendChild(b);e=document.createElement("span");e.textContent="/";f.appendChild(e);
c.appendChild(f)}return d};
akeeba.Fsfilters.renderParentFolderElement=function(){var c=document.getElementById("folders"),a=document.createElement("div");akeeba.System.addClass(a,"folder-container");a.insertAdjacentHTML("beforeend",'<span class="folder-padding"></span>');a.insertAdjacentHTML("beforeend",'<span class="folder-padding"></span>');a.insertAdjacentHTML("beforeend",'<span class="folder-padding"></span>');a.insertAdjacentHTML("beforeend",'<span class="akion-arrow-up-a"></span>');var f=document.createElement("span");f.className=
"folder-name folder-up";var g=document.getElementById("ak_crumbs").children;f.textContent="("+g[g.length-2].querySelector("a").textContent+")";akeeba.System.addEventListener(f,"click",function(){var a=document.getElementById("ak_crumbs").children;akeeba.System.triggerEvent(a[a.length-2].querySelector("a"),"click")});a.appendChild(f);c.appendChild(a)}; //# sourceMappingURL=FileFilters.min.map
