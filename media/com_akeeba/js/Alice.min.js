if(typeof(akeeba)=="undefined"){var akeeba={}}if(typeof(akeeba.jQuery)=="undefined"){akeeba.jQuery=jQuery.noConflict()}var AKEEBA_ANALYZE_SUCCESS=1;var AKEEBA_ANALYZE_WARNING=0;var AKEEBA_ANALYZE_FAILURE=-1;akeeba.jQuery(document).ready(function(d){var e=d("#log");var c=d("#analyze-log");var b=d("#download-log");var a=d("#output-plain");e.attr("disabled",null);e.change(function(){var f=d(this).val();c.hide();b.hide();if(f){c.show();b.show()}});b.click(function(h){h.preventDefault();var g=d(this).data("url");var f=e.val();g.replace("[TAG]",f);window.location=g});c.click(function(g){g.preventDefault();if(d(this).data("started")==true){return false}d(this).addClass("btn-inverse").removeClass("btn-primary").data("started",true);e.attr("disabled",true);d("#stepper-complete").empty();a.hide();var f=new AkeebaStepper({onBeforeStart:function(h){h.data.log=d("#log").val()},onComplete:function(h){var o=[];var m=d(document.createElement("div")).addClass("well");var k=d(document.createElement("div")).addClass("row-striped").appendTo(m);var l=JSON.parse(h.Results);var j=Joomla.JText._("COM_AKEEBA_ALICE_SUCCESSS");var i=Joomla.JText._("COM_AKEEBA_ALICE_WARNING");var n=Joomla.JText._("COM_AKEEBA_ALICE_ERROR");d.each(l,function(p,s){var u=d(document.createElement("div")).addClass("row-fluid").css("width","99%");var r="label-success";var t=j;if(s.result==AKEEBA_ANALYZE_WARNING){t=i;r="label-warning"}else{if(s.result==AKEEBA_ANALYZE_FAILURE){t=n;r="label-important"}}d(document.createElement("div")).addClass("pull-left").html(s.check).appendTo(u);d(document.createElement("div")).addClass("pull-right label "+r).html(t).appendTo(u);d(document.createElement("div")).addClass("clearfix").appendTo(u);if(s.result!=AKEEBA_ANALYZE_SUCCESS){o.push({check:s.raw.check,error:s.raw.error});var q=d(document.createElement("div")).addClass("help-block").appendTo(u);d(document.createElement("div")).html(s.error).appendTo(q);d(document.createElement("div")).html(d(document.createElement("em")).html(s.solution)).appendTo(q)}u.appendTo(k)});m.appendTo("#stepper-complete");d("#stepper-progress-pane").hide("fast");d("#stepper-complete").show();c.removeClass("btn-inverse").addClass("btn-primary").data("started",false);e.attr("disabled",null);if(o){d.ajax("index.php?option=com_akeeba&view=Alice&task=translate",{data:{keys:JSON.stringify(o)},success:function(q){var p=q.match(/###(.*?)###/);if(p[1]===undefined){return}q=JSON.parse(p[1]);var r="------ BEGIN OF ALICE RAW OUTPUT -----\n";d.each(q,function(s,t){r+="[b]"+t.check+"[/b]\n"+t.error+"\n\n"});r+="------ END OF ALICE RAW OUTPUT -----\n";a.find("textarea").val(r);a.show()}})}}});f.init();return false});a.find("textarea").focus(function(){var g=d(this);g.select();window.setTimeout(function(){g.select()},1);function f(){g.off("mouseup",f);return false}g.mouseup(f)});e.change()});