if(typeof akeeba=="undefined"){var akeeba={}}if(typeof akeeba.Wizard=="undefined"){akeeba.Wizard={URLs:{},execTimes:[30,25,20,14,7,5,3],blockSizes:[240,200,160,80,40,16,4,2,1],translation:{}}}akeeba.Wizard.boot=function(){akeeba.Wizard.execTimes=[30,25,20,14,7,5,3];akeeba.Wizard.blockSizes=[480,400,240,200,160,80,40,16,4,2,1];document.getElementById("backup-progress-pane").style.display="block";akeeba.Backup.resetTimeoutBar();akeeba.Wizard.tryAjax()};akeeba.Wizard.tryAjax=function(){akeeba.System.useIFrame=false;akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(10000,100);var a=document.getElementById("step-ajax");a.className="akeeba-label--teal";document.getElementById("backup-substep").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_TRYAJAX");akeeba.System.doAjax({act:"ping"},function(){akeeba.System.useIFrame=false;var b=document.getElementById("step-ajax");b.className=b.className="akeeba-label--green";akeeba.Wizard.minExec()},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTUSEAJAX")},false,10000)};akeeba.Wizard.minExec=function(c,b){if(c==null){c=0}if(b==null){b=0}akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar((2*c+5)*1000,100);document.getElementById("backup-substep").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_MINEXECTRY").replace("%s",c.toFixed(1));var a=document.getElementById("step-minexec");a.className="akeeba-label--teal";akeeba.System.doAjax({act:"minexec",seconds:c},function(d){b++;if(b<3){akeeba.Wizard.minExec(c,b)}else{akeeba.Wizard.minExecApply(c)}},function(){c+=0.5;if(c>20){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEMINEXEC")}else{akeeba.Wizard.minExec(c,0)}},false,(2*c+5)*1000)};akeeba.Wizard.minExecApply=function(b){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(25000,100);document.getElementById("backup-substep").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_SAVEMINEXEC");var a=0;if(akeeba.Backup.useIFrame){a=1}akeeba.System.doAjax({act:"applyminexec",iframes:a,minexec:b},function(d){var c=document.getElementById("step-minexec");c.className=c.className="akeeba-label--green";akeeba.Wizard.directories()},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTSAVEMINEXEC")},false)};akeeba.Wizard.directories=function(){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(10000,100);document.getElementById("backup-substep").innerHTML="";var a=document.getElementById("step-directory");a.className="akeeba-label--teal";akeeba.System.doAjax({act:"directories"},function(c){if(c){var b=document.getElementById("step-directory");b.className=b.className="akeeba-label--green";akeeba.Wizard.database()}else{document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES")}},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES")},false)};akeeba.Wizard.database=function(){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(30000,50);document.getElementById("backup-substep").innerHTML="";var a=document.getElementById("step-dbopt");a.className="akeeba-label--teal";akeeba.System.doAjax({act:"database"},function(c){if(c){var b=document.getElementById("step-dbopt");b.className=b.className="akeeba-label--green";akeeba.Wizard.maxExec()}else{document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTDBOPT")}},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTDBOPT")},false)};akeeba.Wizard.maxExec=function(){var a=array_shift(akeeba.Wizard.execTimes);if(empty(akeeba.Wizard.execTimes)||(a==null)){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_EXECTOOLOW");return}akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar((a*1.2)*1000,80);var b=document.getElementById("step-maxexec");b.className="akeeba-label--teal";document.getElementById("backup-substep").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(0));akeeba.System.doAjax({act:"maxexec",seconds:a},function(c){if(c){akeeba.Wizard.maxExecApply(a)}else{akeeba.Wizard.maxExec()}},function(){akeeba.Wizard.maxExec()},false,38000)};akeeba.Wizard.maxExecApply=function(a){akeeba.Backup.resetTimeoutBar();akeeba.Backup.startTimeoutBar(10000,100);document.getElementById("backup-substep").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_SAVINGMAXEXEC");akeeba.System.doAjax({act:"applymaxexec",seconds:a},function(){var b=document.getElementById("step-maxexec");b.className=b.className="akeeba-label--green";akeeba.Wizard.partSize()},function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTSAVEMAXEXEC")})};akeeba.Wizard.partSize=function(){akeeba.Backup.resetTimeoutBar();var b=array_shift(akeeba.Wizard.blockSizes);if(empty(akeeba.Wizard.blockSizes)||(b==null)){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("error-panel").style.display="block";document.getElementById("backup-error-message").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEPARTSIZE");return}var c=b/8;akeeba.Backup.startTimeoutBar(30000,100);document.getElementById("backup-substep").textContent=Joomla.JText._("COM_AKEEBA_CONFWIZ_UI_PARTSIZE").replace("%s",c.toFixed(3));var a=document.getElementById("step-splitsize");a.className="akeeba-label--teal";akeeba.System.doAjax({act:"partsize",blocks:b},function(e){if(e){var d=document.getElementById("step-splitsize");d.className=d.className="akeeba-label--green";akeeba.Wizard.done()}else{akeeba.Wizard.partSize()}},function(d){akeeba.Wizard.partSize()},false,60000)};akeeba.Wizard.done=function(){document.getElementById("backup-progress-pane").style.display="none";document.getElementById("backup-complete").style.display="block"};